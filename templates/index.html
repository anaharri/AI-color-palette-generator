<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Color Palette Generator</title>

		<style>
			.container {
				background-color: black;
				width: 100%;
				height: 100vh;
				display: flex;
				flex-direction: row;
			}

			.color {
				height: 100%;
			}
		</style>
	</head>

	<body>
		<div class="container"></div>
		<form id="form">
			<input type="text" name="query" />
			<button>Submit</button>
		</form>

		<script>
			const form = document.querySelector("#form");

			form.addEventListener("submit", e => {
				e.preventDefault();
				query = form.elements.query.value;
				fetch("/palette", {
					method: "POST",
					headers: {
						"Content-Type": "application/x-www-form-urlencoded",
					},
					body: new URLSearchParams({
						query,
					}),
				})
					.then(response => response.json())
					.then(colors => {
						console.log(colors);
						const container = document.querySelector(".container");
						for (const color of colors) {
							const div = document.createElement("div");
							div.classList.add("color");
							div.style.backgroundColor = color;
							div.style.width = `calc(100%/${colors.length})`;

							container.appendChild(div);
						}
					})
					.catch(e => console.error(e));

				form.elements.query.value = "";
			});
		</script>
	</body>
</html>
